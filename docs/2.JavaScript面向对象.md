# JavaScript 面向对象

## 面向对象的程序设计

面向对象的程序（Object-oriented programming ，OOP）是什么？

> OOP 的基本思想是：在程序里，我们通过使用对象去构建现实世界的模型，把原本很难（或不可）能被使用的功能，简单化并提供出来，以供访问。

定义一个对象模板

> 在一些面向对象的语言中，我们用类（class）的概念去描述一个对象。（基于 class 创建出对象）

实例对象被类实例化

> 当一个对象需要从类中创建出来时，类的构造函数就会运行来创建这个实例。

## 构建函数和对象

JavaScript 用一种称为构建函数的特殊函数来定义对象和它们的特征。

构建函数非常有用，因为很多情况下您不知道实际需要多少个对象（实例）。构建函数提供了创建您所需对象（实例）的有效方法，将对象的数据和特征函数按需联结至相应对象。

从构建函数创建的新实例的特征并非全盘复制，而是通过一个叫做原形链的参考链链接过去的。所以这并非真正的实例。

### JavaScript 如何通过构建函数对象来创建类？

- 通过普通函数创建对象

```js
// 通过一个普通的函数定义一个“人”
function createNewPerson(name) {
  const obj = {};
  obj.name = name;
  obj.greeting = function () {
    alert('Hi! I\'m ' + this.name + '.');
  }
  return obj;
}

// 通过调用这个函数创建一个新的叫 salva 的人
const salva = createNewPerson('salva');
```

> 上述代码运行良好，但是有点冗长。幸好 JavaScript 通过构建函数提供了一个便捷的方法。如下：

- 通过构建函数创建类

```js
// 这个构建函数是 JavaScript 版本的类
function Person(name) {
  this.name = name;
  this.greeting = function() {
    alert('Hi! I\'m ' + this.name + '.');
  };
}

// 构造对象
const person1 = new Person('Bob');
const person2 = new Person('Sarah');
```

> 这里使用了 this 关键词，即无论是该对象的哪个实例被这个构建函数创建，它的 name 属性就是传递到构建函数形参name的值，它的 greeting() 方法中也将使用相同的传递到构建函数形参 name 的值。

> 关键字 new 跟着一个含参函数，用于告知浏览器我们想要创建一个对象，非常类似函数调用，并把结果保存到变量中。

> Tips:  一个构建函数通常是大写字母开头，这样便于区分构建函数和普通函数。

当新的对象被创立, 变量 person1 与 person2 有效地包含了以下值：

```js
{
  name : 'Bob',
  greeting : function() {
    alert('Hi! I\'m ' + this.name + '.');
  }
}

{
  name : 'Sarah',
  greeting : function() {
    alert('Hi! I\'m ' + this.name + '.');
  }
}
```

值得注意的是每次当我们调用构造函数时，我们都会重新定义一遍 greeting()，这不是个理想的方法。为了避免这样，我们可以在原型里定义函数。

## 创建对象的其他方式

创建对象的方式

- [声明一个对象的语法](./1.对象基础概念.md)（回顾对象基础概念）
- 使用构造函数（回顾上面）
- 使用 Object() 构造函数
- 使用 create() 方法

### Object()构造函数

使用 Object() 构造函数来创建一个新对象（空对象）

```js
const person1 = new Object();
```

然后, 可以根据需要, 使用点或括号表示法向此对象添加属性和方法

```js
person1.name = 'Chris';
person1['age'] = 18;
person1.greeting = function() {
  alert('Hi! I\'m ' + this.name + '.');
}
```

还可以将对象文本传递给 Object() 构造函数作为参数， 以便用属性/方法填充它

```js
const person1 = new Object({
  name : 'Chris',
  age : 38,
  greeting : function() {
    alert('Hi! I\'m ' + this.name + '.');
  }
});
```

### 使用 create()方法

JavaScript 有个内嵌的方法 create(), 它允许您基于现有对象创建新的对象。

```js
const person2 = Object.create(person1);
```

> person2 是基于 person1 创建的， 它们具有相同的属性和方法。这非常有用， 因为它允许您创建新的对象而无需定义构造函数。

## 总结

介绍了一些面向对象原理。研究 javascript与 "经典 OOP"的关联与区别， 如何使用构造函数实现 javascript 中的类， 以及生成对象的不同方法。
